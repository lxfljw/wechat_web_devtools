!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t,n){const o=new(0,n(5).EventEmitter);o.setMaxListeners(100),e.exports=o},function(e,t,n){const o=n(4),r=n(0);e.exports.$=function(e,t){return"string"==typeof t&&(t=document.querySelector(t)),(t||document).querySelector(e)},e.exports.$$=function(e){return document.querySelectorAll(e)},e.exports.show=function(e){"string"==typeof e&&(e=document.querySelector(e)),e.style.display=""},e.exports.hide=function(e){"string"==typeof e&&(e=document.querySelector(e)),e.style.display="none"},e.exports.sprintf=function(e,t){for(let n=0;n<t.length;n++)e=e.replace(/%s/,t[n]);return e},e.exports.reportBehavior=function(e){o.invoke("REPORT",{data:JSON.stringify(e)})},e.exports.log=function(){const e=Array.prototype.slice.call(arguments);e.unshift("color: #ea6f5a;"),e.unshift("%c[Audit]"),console.log.apply(console,e)},e.exports.formatSize=function(e){const t=["B","K","M","G"];let n;for(;(n=t.shift())&&e>1024;)e/=1024;return("B"===n?e:e.toFixed(2))+n},e.exports.hash=function(e){let t=5381,n=e.length;for(;n;)t=33*t^e.charCodeAt(--n);return t>>>0},e.exports.byteCount=function(e){return encodeURI(e).split(/%..|./).length-1},e.exports.unique=function(e){var t=[];for(var n in e)-1===t.indexOf(e[n])&&t.push(e[n]);return t},e.exports.getType=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},e.exports.compareVersion=function(e,t){e=e.split("."),t=t.split(".");const n=Math.max(e.length,t.length);for(;e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(let o=0;o<n;o++){const n=parseInt(e[o]),r=parseInt(t[o]);if(n>r)return 1;if(n<r)return-1}return 0},o.on("RESP_FS_READ_FILE",e=>{r.emit("_read-file",e.data)}),e.exports.readFile=function(e,t){r.on("_read-file",function n(o){o.path===e&&("function"==typeof t&&t({content:o.fileData,path:e}),r.removeListener("_read-file",n))}),o.invoke("FS_READ_FILE",{path:e})},e.exports.status="running"},,function(e,t,n){const o=n(0);n(1);var r=function(){const e=window.navigator||window.__global.navigator,t=window.WebSocket||window.__global.WebSocket;var n=e.userAgent.match(/port\/(\d*)/),r=null,i=`ws://127.0.0.1:${n?parseInt(n[1]):9974}`,s=null,a=[],c=[];const u="GET_MESSAGE_TOKEN";function p(e){r&&r.readyState===t.OPEN?r.send(JSON.stringify(e)):c.push(e)}const f=e=>{a.push(e)};return{connect:function e(n){s=n||s;var f=window.prompt?prompt(u):__global.prompt(u);(r=new t(i,`${s}#${f}#`)).onopen=function(e){let t=[].concat(c);c=[],t.forEach(e=>{p(e)})},r.onclose=function(t){r=null,setTimeout(()=>{e(n)},100)},r.onmessage=function(e){try{let t=JSON.parse(e.data);!function(e){a.forEach(t=>{try{t(e)}catch(e){console.error(e)}})}(t),function(e){if("TRANSFER"===e.command&&e.data){window.navigator.userAgent;const t=e.data.eventName;o.emit(t,e.data.data)}}(t)}catch(e){console.error("ws.onmessage cb error",e)}}},send:p,registerCallback:f,getWs:()=>r,pub:function(e,t={}){p({command:"TRANSFER",data:{eventName:e,data:t,from:window.navigator.userAgent.indexOf("appservice")>-1?"appservice":"webview"}})},sub:function(e,t){f(n=>{"TRANSFER"===n.command&&(n.data?n.data.eventName===e&&t(n.data):console.error("messager sub error: no data field."))})}}}();e.exports=r},function(e,t){var n=[],o={};window.addEventListener("wechatideReady",()=>{n.forEach(e=>{window.wechatide.invoke(e.command,e.args,e.callback)}),n=[];for(const e in o)window.wechatide.on(e,o[e])});e.exports={invoke:(e,t,o)=>{window.wechatide?window.wechatide.invoke(e,t,o):n.push({command:e,args:t,callback:o})},on:(e,t)=>{const n=function(...e){try{t.apply(this,e)}catch(e){console.error(e)}};window.wechatide?window.wechatide.on(e,n):o[e]=n}}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!function(e){return"number"==typeof e}(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,s,a,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var p=new Error('Uncaught, unspecified "error" event. ('+t+")");throw p.context=t,p}if(i(n=this._events[e]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(r(n))for(a=Array.prototype.slice.call(arguments,1),s=(u=n.slice()).length,c=0;c<s;c++)u[c].apply(this,a);return!0},n.prototype.addListener=function(e,t){var s;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?r(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,r(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var n,i,s,a;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,i=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(n)){for(a=s;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},,function(e,t,n){const{compareVersion:o}=n(1);e.exports.getValidVersions=function(e,t,n){if(!t)return[];const r=Object.keys(n),i=r.indexOf(t);if(-1===i)return[];{const t=n[r[i]];return Object.keys(t).filter(t=>o(t,e)<=0)}},e.exports.doesNeedProperty=function(e,t,n){let o=!1;for(let n=0;n<e.length;n++){if(t[e[n]].length){o=!0;break}}return o},e.exports.getValidItemsWithSpecificVersions=function(e,t,n){let o=void 0;for(let r=0;r<e.length;r++){let i=t[e[r]];for(let e=0;e<i.length;e++){let t=i[e];if("string"==typeof t&&t===n){void 0===o&&(o=[]);break}if("object"==typeof t&&t.hasOwnProperty(n)){o=void 0===o?t[n]:o.concat(t[n]);break}}}return o},e.exports.getValidItem=function(e,t){for(let n=0;n<e.length;n++){if("string"==typeof e[n]&&e[n]===t)return[];if("object"==typeof e[n]&&e[n].hasOwnProperty(t))return e[n][t]}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){const o=n(3),r=n(39);n(1);function i(){r.init()}o.connect("APPSERVICE_EXPERIENCE"),"complete"===document.readyState?i():window.addEventListener("load",i)},function(e,t,n){const o=n(3),r=n(0),i=n(1),s=n(40),c=n(41),u=setInterval,p=setTimeout,f=Object.defineProperties,l=Object.keys,d=["surroundThirdByTryCatch","slowReport","speedReport","reportKeyValue","reportIDKey"];let _=null;function h(){const e=[];try{a}catch(t){const n=t.stack.split("\n").slice(3);for(let t=0;t<n.length;t++){let o=n[t];if(o.indexOf("WAService.js")>-1||o.indexOf("appservice/__dev__")>-1)break;let r=o.match(/at (.+) \(http:\/\//);r&&r[1]&&e.push(r[1])}}return e}function v(){getCurrentPages().forEach(e=>{if(!e||e.__set_data_rewrited__)return;const t=e.setData;f(e,{setData:{value:function(n,o){if(t.call(e,n,o),"running"!==i.status)return;p(function(){r.emit("set-data",n,"Page",s)});const s=h()}}}),e.__set_data_rewrited__=!0})}Object.keys=function(e){const t=l(e);for(let e=0;e<d.length;e++){let n=d[e];if(-1===t.indexOf(n))return t}const n=Array.prototype.forEach;return Array.prototype.forEach=function(e){const t=Object.defineProperty;Object.defineProperty=function(e,n,o){o.configurable=!0,t(e,n,o)},n.call(this,e),Object.defineProperty=t,Array.prototype.forEach=n},Object.keys=l,l(e)},window.__passWAServiceGlobal__=function(e){for(let t in e)"Protect"!==t&&(window[t]=e[t]);!function(){const e=__appServiceSDK__.wx.request;f(__appServiceSDK__.wx,{request:{value:function(t){const n=t.success;t.success=function(e){"function"==typeof n&&n(e),"running"===i.status&&200===e.statusCode&&e.data&&function(e,t){o.send({command:"TRANSFER",eventName:"wx-request-body",from:"appservice",data:{url:e,body:t,page:__appServiceEngine__.getCurrentRoute()}})}(t.url,i.hash(JSON.stringify(e.data)))},e(t),"running"===i.status&&function(e){o.send({command:"TRANSFER",eventName:"wx-request",from:"appservice",data:{url:e,page:__appServiceEngine__.getCurrentRoute()}})}(t.url)}}})}(),s.hook(),c.hook(),_=__wxConfig,__wxConfig.plugins},r.on("stop-audit",function(){i.status="stopped"}),r.on("console",function(e){console.warn(e.msg)}),e.exports.init=function(){if("undefined"==typeof __appServiceSDK__)return console.error("基础库切换到 2.2.0+ ，才能使用 Audits 功能"),void o.pub("not-supported-wxalib");o.pub("appid",{appId:_&&_.accountInfo.appId}),__appServiceSDK__.onAppRoute(function(){"running"===i.status&&v()}),v(),function(){const e={};Object.keys(exparser.Component._list).forEach(function(t){!t||"wx://functional-page"===t||/^plugin:\/\//.test(t)||/^plugin-private:\/\//.test(t)||/(^|\/)miniprogram_npm\//g.test(t)||(e[t]=exparser.Component._list[t])}),Object.keys(e).forEach(t=>{if(!t)return;const n=e[t],o=n.initiator;n.initiator=function(){const e=this,t=e.setData;o.call(e),e.__customConstructor__===__virtualDOM__.Page||e.__set_data_rewrited__||(f(this,{setData:{value:function(n,o){if(t.call(e,n,o),"running"!==i.status)return;p(()=>{r.emit("set-data",n,this.is,s)});const s=h()}}}),e.__set_data_rewrited__=!0)}})}(),n(43).init(),n(44).init(),n(45).init(p),n(46).init(),n(47).init(p,u),n(48).init()}},function(e,t,n){const o=n(3),r=n(1);e.exports.hook=function(){const e=Reporter.slowReport;Object.defineProperties(Reporter,{slowReport:{value:function(t){e(t),"running"===r.status&&"pageInvoke"===t.key&&function(e,t){o.pub("execute-long-time",{cost:e,extend:t,page:__appServiceEngine__.getCurrentRoute()})}(t.cost,t.extend)},configurable:!0}})}},function(e,t,n){const o=n(3),r=(n(1),n(42)),{getValidVersions:i,getValidItemsWithSpecificVersions:s,doesNeedProperty:a}=n(7),c=Object.defineProperties,u=Object.keys(r);let p=[],f=null;function l(e){-1===p.indexOf(e)&&p.push(e);const t=__appServiceEngine__.getCurrentRoute();clearTimeout(f),f=setTimeout(function(){o.pub("deprecated-api",{deprecateds:p,page:t}),p=[]},500)}const d=(e,t,n,o)=>{const u=r[t];let p,f;if(0===(p=i(e,t,r)).length)return;if(!a(p,u))return void l(t);const d=((e,t,n)=>s(e,t,n))(p,u,"$method")||[];f=[],d.forEach(e=>{const n=o[e];f[e]={value:function(...r){n.apply(o,r),l(`${t}.${e}`)}}}),c(o,f)};e.exports.hook=function(){const e={},t=__appServiceSDK__.wx,n=t.version&&t.version.version;u.forEach(o=>{const r=t[o];e[o]={value:function(...e){const i=r.apply(t,e);return d(n,o,0,i),i}}}),c(t,e)}},function(e){e.exports={stopVoice:{"1.6.0":[]},pauseVoice:{"1.6.0":[]},playVoice:{"1.6.0":[]},createAudioContext:{"1.6.0":[]},stopRecord:{"1.6.0":[]},startRecord:{"1.6.0":[]},onBackgroundAudioStop:{"1.2.0":[]},onBackgroundAudioPause:{"1.2.0":[]},onBackgroundAudioPlay:{"1.2.0":[]},stopBackgroundAudio:{"1.2.0":[]},seekBackgroundAudio:{"1.2.0":[]},pauseBackgroundAudio:{"1.2.0":[]},playBackgroundAudio:{"1.2.0":[]},getBackgroundAudioPlayerState:{"1.2.0":[]},setTopBarText:{"1.9.9":[]},createContext:{"1.0.0":[]},drawCanvas:{"1.0.0":[]},createCanvasContext:{"1.0.0":["getActions"],"1.9.90":[{$method:["setFontSize","setMiterLimit","setLineDash","setLineCap","setLineJoin","setLineWidth","setGlobalAlpha","setShadow","setStrokeStyle","setFillStyle"]}]}}},function(e,t,n){const o=n(3),r=n(1);function i(e){"running"===r.status&&o.pub("js-exception",{msg:e,page:__appServiceEngine__.getCurrentRoute()})}e.exports.init=function(){Reporter.registerErrorListener(i)}},function(e,t,n){const o=n(3);n(0).on("set-data",function(e,t,n){const r=JSON.stringify(e).length;r>262144&&function(e,t,n,r){o.pub("set-data-large",{size:e,page:__appServiceEngine__.getCurrentRoute(),position:t,stack:n.join(" -> "),vars:r})}(r,t,n,Object.keys(e))}),e.exports.init=function(){}},function(e,t,n){const o=n(3),r=n(0),i=1e3,s=20;let a=setTimeout,c=[],u=Date.now(),p=null;function f(e,t,n){o.pub("set-data-freq",{times:e,page:__appServiceEngine__.getCurrentRoute(),position:t,stack:n.join(" -> ")})}r.on("set-data",function(e,t,n){const o=Date.now(),r=o-u;u=o,r>i?c=[]:c.push(r),c.length>=s&&function(e,t){clearTimeout(p);for(let n=0,o=c.length;n<o;n++){let r=0,u=n;for(;r<i&&u<o;)r+=c[u],u++;if(r<i)return void(u-n>=s&&(p=a(function(){f(u-n,e,t),c=[]},i-r)));if(u-n>=s){f(u-n,e,t),c=[];break}}}(t,n)}),e.exports.init=function(e){a=e}},function(e,t,n){const o=n(3),r=n(0);n(1);r.on("set-data",function(e,t,n){!function(e,t,n){o.pub("set-data-no-binding",{vars:e,page:__appServiceEngine__.getCurrentRoute(),position:t,stack:n.join(" -> ")})}(Object.keys(e),t,n)}),e.exports.init=function(){}},function(e,t,n){const o=n(3),r=(n(0),n(1)),i=Object.defineProperty,s=function(){return this}();function a(e,t){const n=function(n,a=0,...c){let u,p,f=__appServiceEngine__.getCurrentRoute();return"running"===r.status&&(i(n,"name",{writable:!0}),n.name=`Audit_${t}_${f}`,u=function(){try{foo.bar.foo.bar}catch(e){const t=e.stack.split("\n")[3];if(t.indexOf("appservice/__asdebug__")>-1||t.indexOf("appservice/__dev__")>-1||t.indexOf("appservice/appservice")>-1)return null;const n=t.match(/at (.*) \(([^)]+)\)/);return n?{funcName:n[1],path:n[2]}:null}return null}()),e("running"===r.status?function(){if(n.apply(s,c),!u)return;const e=__appServiceEngine__.getCurrentRoute(),r=(u.funcName||"").match(/Audit_(setTimeout|setInterval)_(.*)/);r&&r[2]&&(f=r[2]),p=(u.path||"").replace(/^.*\/appservice\/([^:]+).*$/,"$1"),e!==f&&function(e,t,n){o.pub("timer-no-recycle",{name:t,page:e,path:n})}(f,t,p)}:n,a)};return i(n,"name",{writable:!0}),n.name=`Audit_${t}`,n}e.exports.init=function(e,t){!function(e,t){setInterval=a(t,"setInterval"),setTimeout=a(e,"setTimeout")}(e,t)}},function(e,t,n){const o=n(3),r=n(0);n(1);let i=[],s=[],a=[];__wxConfig&&__wxConfig.tabBar&&(a=__wxConfig.tabBar.list.map(e=>e.pagePath.replace(".html",""))),r.on("stop-audit",function(){let e=[];for(let t of s)t&&e.push(t.route);e=e.concat(i),o.pub("page-info",{pages:e})}),__appServiceSDK__.onAppRoute(e=>{let t=__appServiceEngine__.getCurrentPages();t[0]&&i.indexOf(t[0].route)<0&&a.indexOf(t[0].route)>-1&&i.push(t[0].route),s=t}),e.exports.init=function(){}}]);